// 修改为带错误处理的版本
async function getJoke() {
  const input = document.getElementById("input").value.trim();
  const output = document.getElementById("output");

  if (!input) {
    output.innerText = "请输入点什么吧，别让我干瞪眼！";
    return;
  }

  try {
    output.innerText = "思考中...🤔";

    const response = await fetch(`/api/python1?input=${encodeURIComponent(input)}`);

    if (!response.ok) {
      throw new Error(`HTTP错误 ${response.status}`);
    }

    const data = await response.json();
    output.innerText = data.response || "回复内容解析失败";
  } catch (error) {
    output.innerText = `出错啦：${error.message}`;
  }
}